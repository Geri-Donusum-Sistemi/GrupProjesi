<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Geri Dönüşüm Bilgilendirme Sistemi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: transparent;
        }
        .language-toggle {
            position: fixed;
            left: 20px;
            top: 15px;
            display: flex;
            gap: 8px;
            z-index: 9999;
        }
        .lang-flag {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.1);
        }
        .lang-flag:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.2);
            border-color: #fbc02d;
        }
        .lang-flag.active {
            border-color: #fbc02d;
            box-shadow: 0 0 8px rgba(251, 192, 45, 0.8);
        }
        header {
            background: #2e7d32;
            color: white;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            column-gap: 10px;
        }
        header > div:first-child {
            text-align: center;
            grid-column: 2;
            margin: 0 auto;
        }
        .auth-area {
            grid-column: 3;
            display: flex;
            gap: 10px;
            align-items: center;
            justify-self: end;
        }
        header h1 {
            margin: 0 0 5px 0;
        }
        header p {
            margin: 0;
        }
        .auth-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .auth-buttons button {
            background: white;
            color: #2e7d32;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }
        .auth-buttons button:hover {
            background: #a5d6a7;
        }
        .auth-buttons button.signup {
            background: #fbc02d;
            color: #000;
        }
        .auth-buttons button.signup:hover {
            background: #f9a825;
        }
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10010; /* raised above header (header z-index: 9999) */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: relative;
            z-index: 10011; /* ensure modal content sits above header */
        }
        .modal-content h2 {
            margin-top: 0;
            color: #2e7d32;
        }
        .modal-content form {
            display: flex;
            flex-direction: column;
        }
        .modal-content input {
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        .modal-content input:focus {
            outline: none;
            border-color: #2e7d32;
            box-shadow: 0 0 5px #2e7d32;
        }
        .modal-content button {
            background: #2e7d32;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .modal-content button:hover {
            background: #0277bd;
        }
        .modal-close {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }
        .modal-close:hover {
            color: #000;
        }
        .user-info {
            display: none;
            color: white;
            align-items: center;
            gap: 10px;
        }
        .user-info.show {
            display: flex;
        }
        .user-info span {
            font-weight: bold;
        }
        .user-info button {
            background: white;
            color: #2e7d32;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: background 0.3s;
        }
        .user-info button:hover {
            background: #a5d6a7;
        }
        nav {
            background: #0288d1;
            color: white;
            padding: 10px;
            text-align: center;
        }
        nav a {
            color: white;
            margin: 0 10px;
            text-decoration: none;
            font-weight: bold;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        h2 {
            color: #2e7d32;
        }
        ul {
            line-height: 1.6;
        }
        .kutular {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .kutu {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            border-radius: 8px;
            color: white;
            text-align: center;
            font-weight: bold;
        }
        .kagit { background: #1976d2; }
        .plastik { background: #fbc02d; color:#000; }
        .cam { background: #388e3c; }
        .metal { background: #616161; }
        footer {
            text-align: center;
            padding: 10px;
            font-size: 13px;
            color: #555;
        }
    </style>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="bg-world">

<div class="language-toggle">
    <div class="lang-flag active" data-lang="tr" onclick="switchLanguage('tr')" title="Türkçe">
        <svg width="40" height="40" viewBox="0 0 100 100" style="border-radius: 8px; overflow: hidden;">
            <rect width="100" height="100" fill="#DC143C"/>
            <circle cx="28" cy="50" r="16" fill="white"/>
            <circle cx="35" cy="50" r="11" fill="#DC143C"/>
            <polygon points="55,32 58,40 67,40 60,45 62,53 55,48 48,53 50,45 43,40 52,40" fill="white"/>
            <rect width="100" height="100" fill="none" stroke="#FFD700" stroke-width="6" rx="8"/>
        </svg>
    </div>
    <div class="lang-flag" data-lang="en" onclick="switchLanguage('en')" title="English">
        <svg width="40" height="40" viewBox="0 0 100 100" style="border-radius: 8px; overflow: hidden;">
            <rect width="100" height="100" fill="#B22234"/>
            <rect width="100" height="9" fill="#B22234" y="0"/>
            <rect width="100" height="9" fill="white" y="9"/>
            <rect width="100" height="9" fill="#B22234" y="18"/>
            <rect width="100" height="9" fill="white" y="27"/>
            <rect width="100" height="9" fill="#B22234" y="36"/>
            <rect width="100" height="9" fill="white" y="45"/>
            <rect width="100" height="9" fill="#B22234" y="54"/>
            <rect width="100" height="9" fill="white" y="63"/>
            <rect width="100" height="9" fill="#B22234" y="72"/>
            <rect width="100" height="9" fill="white" y="81"/>
            <rect width="100" height="9" fill="#B22234" y="90"/>
            <rect width="45" height="50" fill="#3C3B6B"/>
            <rect width="100" height="100" fill="none" stroke="#FFD700" stroke-width="6" rx="8"/>
        </svg>
    </div>
</div>

<header>
    <div>
        <h1 data-i18n="site-title">Geri Dönüşüm Bilgilendirme Sistemi</h1>
        <p data-i18n="site-subtitle">Çevreyi korumak için küçük adımlar, büyük etkiler.</p>
    </div>
    <div class="auth-area">
        <div class="auth-buttons" id="authButtons">
            <button onclick="openLoginModal()" data-i18n="login">Giriş Yap</button>
            <button class="signup" onclick="openSignupModal()" data-i18n="signup">Kayıt Ol</button>
        </div>
        <label class="theme-switch" title="Koyu temayı aç/kapa">
            <input type="checkbox" id="themeToggle" aria-label="Koyu tema">
            <span class="switch-slider"></span>
        </label>
    </div>
    <div class="user-info" id="userInfo">
        <span id="username"></span>
        <button onclick="logout()" data-i18n="logout">Çıkış</button>
    </div>
</header>

<!-- Login Modal -->
<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="modal-close" onclick="closeLoginModal()">&times;</span>
        <h2 data-i18n="login-heading">Giriş Yap</h2>
        <form>
            <input type="email" placeholder="E-posta Adresi" data-i18n="email" required>
            <input type="password" placeholder="Şifre" data-i18n="password" required>
            <button type="submit" data-i18n="login">Giriş Yap</button>
        </form>
        <p style="text-align: center; margin-top: 15px; font-size: 0.9rem;">
            <span data-i18n="no-account">Hesabınız yok mu?</span> <a href="#" onclick="switchToSignup()" style="color: #2e7d32; text-decoration: none;" data-i18n="signup">Kayıt Ol</a>
        </p>
    </div>
</div>

<!-- Signup Modal -->
<div id="signupModal" class="modal">
    <div class="modal-content">
        <span class="modal-close" onclick="closeSignupModal()">&times;</span>
        <h2 data-i18n="signup-heading">Kayıt Ol</h2>
        <form>
            <input type="text" placeholder="Ad Soyad" data-i18n="full-name" required>
            <input type="text" placeholder="Kullanıcı Adı" data-i18n="nickname" name="nickname" required>
            <input type="email" placeholder="E-posta Adresi" data-i18n="email" required>
            <input type="password" placeholder="Şifre" data-i18n="password" required>
            <input type="password" placeholder="Şifre Tekrar" data-i18n="password-repeat" required>
            <button type="submit" data-i18n="signup">Kayıt Ol</button>
        </form>
        <p style="text-align: center; margin-top: 15px; font-size: 0.9rem;">
            <span data-i18n="have-account">Zaten hesabınız var mı?</span> <a href="#" onclick="switchToLogin()" style="color: #2e7d32; text-decoration: none;" data-i18n="login">Giriş Yap</a>
        </p>
    </div>
</div>


<script>
function openLoginModal() {
    document.getElementById("loginModal").classList.add("show");
    document.getElementById("signupModal").classList.remove("show");
}

function closeLoginModal() {
    document.getElementById("loginModal").classList.remove("show");
}

function openSignupModal() {
    document.getElementById("signupModal").classList.add("show");
    document.getElementById("loginModal").classList.remove("show");
}

function closeSignupModal() {
    document.getElementById("signupModal").classList.remove("show");
}

function switchToLogin() {
    closeSignupModal();
    openLoginModal();
}

function switchToSignup() {
    closeLoginModal();
    openSignupModal();
}

function getProfiles() {
    try {
        return JSON.parse(localStorage.getItem('userProfiles')) || {};
    } catch (e) {
        return {};
    }
}

function saveProfiles(profiles) {
    localStorage.setItem('userProfiles', JSON.stringify(profiles));
}

function setLoggedIn(email, nickname) {
    const displayName = (nickname && nickname.trim()) || (email ? email.split('@')[0] : '');
    if (displayName) {
        localStorage.setItem('loggedInUser', displayName);
    }
    if (email) {
        localStorage.setItem('loggedInEmail', email);
    }
}

function login(email) {
    const profiles = getProfiles();
    const nickname = profiles[email]?.nickname;
    setLoggedIn(email, nickname);
    updateAuthUI();
    closeLoginModal();
}

function logout() {
    // localStorage'dan sil
    localStorage.removeItem('loggedInUser');
    localStorage.removeItem('loggedInEmail');
    
    // UI güncelle
    updateAuthUI();
}

function updateAuthUI() {
    const user = localStorage.getItem('loggedInUser');
    const authButtons = document.getElementById('authButtons');
    const userInfo = document.getElementById('userInfo');
    
    if (user) {
        // Giriş yapılmış
        authButtons.style.display = 'none';
        userInfo.classList.add('show');
        document.getElementById('username').textContent = 'Hoşgeldin, ' + user + '!';
    } else {
        // Giriş yapılmamış
        authButtons.style.display = 'flex';
        userInfo.classList.remove('show');
    }
}

// Form submit işlemini yakala
document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.querySelector('#loginModal form');
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            login(email);
            this.reset();
        });
    }
    
    const signupForm = document.querySelector('#signupModal form');
    if (signupForm) {
        signupForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            const nickname = this.querySelector('input[name="nickname"]').value;
            const password = this.querySelector('input[type="password"]').value;

            try {
                await fetch('/signup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password, nickname })
                });
            } catch (err) {
                console.error('Signup kaydı gönderilemedi', err);
            }

            const profiles = getProfiles();
            profiles[email] = { nickname };
            saveProfiles(profiles);
            setLoggedIn(email, nickname);
            updateAuthUI();
            closeSignupModal();
            this.reset();
        });
    }
    
    // Sayfa yüklendiğinde UI kontrol et
    updateAuthUI();
});

// Modal dışına tıklandığında kapat
window.onclick = function(event) {
    var loginModal = document.getElementById("loginModal");
    var signupModal = document.getElementById("signupModal");
    if (event.target == loginModal) {
        loginModal.classList.remove("show");
    }
    if (event.target == signupModal) {
        signupModal.classList.remove("show");
    }
}
</script>

<div class="nav-with-panel">
        <nav>
        <a href="#neden" id="link-neden" data-i18n="nav-why">Neden Geri Dönüşüm?</a>
        <a href="#iletisim" data-i18n="nav-contact">İletişim</a>
        <a href="#ekip" data-i18n="nav-team">Proje Ekibi</a>
    </nav>

    <!-- Hover panel: hidden by default, shown when hovering the "Neden" link -->
    <div id="hover-neden" class="hover-panel" aria-hidden="true">
        <h2 data-i18n="why-heading">Neden Geri Dönüşüm Önemlidir?</h2>
        <ul>
            <li data-i18n="why-item1">Doğal kaynakların daha verimli kullanılmasını sağlar.</li>
            <li data-i18n="why-item2">Enerji tasarrufu sağlar.</li>
            <li data-i18n="why-item3">Çöp miktarını ve çevre kirliliğini azaltır.</li>
            <li data-i18n="why-item4">Gelecek nesiller için daha temiz bir dünya bırakmamıza yardım eder.</li>
        </ul>
    </div>
    
    <!-- Hover panel for Atık Türleri removed per user request (no hover on nav link) -->
</div>

<!-- Parallax hero: kuş bakışı / geri dönüşüm temalı görsel ile hareketli arka plan -->
<section class="parallax-hero">
    <div class="layer layer-back" aria-hidden="true"></div>
    <div class="layer layer-mid" aria-hidden="true"></div>
    <div class="layer layer-front" aria-hidden="true"></div>
    <div class="hero-content hero-float">
        <h1 data-i18n="hero-title">Geri Dönüşümle Geleceğe Adım At</h1>
        <p data-i18n="hero-subtitle">Doğa için küçük bir adım atın — bugün geri dönüştürmeye başlayın.</p>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <a class="cta" href="/bilgi" style="background: #1565c0;" data-i18n="detailed-info">Detaylı Bilgi</a>
        </div>
    </div>
</section>

<script>
// Generic helper to attach a hover/focus panel to a nav link
;(function(){
    function attachHoverPanel(linkId, panelId) {
        const link = document.getElementById(linkId);
        const panel = document.getElementById(panelId);
        if (!link || !panel) return;

        let hideTimeout = null;

        function position() {
            const rect = link.getBoundingClientRect();
            const navEl = link.closest('nav') || document.querySelector('nav');
            const navRect = navEl.getBoundingClientRect();
            const scrollX = window.scrollX || window.pageXOffset;
            const scrollY = window.scrollY || window.pageYOffset;
            if (window.innerWidth > 720) {
                // Choose a comfortable panel width (responsive but not tiny)
                const viewportWidth = window.innerWidth;
                const maxAllowed = Math.min(920, Math.floor(viewportWidth * 0.92));
                const preferred = Math.min(520, maxAllowed); // keep panels readable
                const panelWidth = Math.max(300, preferred);

                panel.style.width = panelWidth + 'px';

                // Center the panel horizontally under the link, but clamp inside viewport
                let left = rect.left + scrollX + (rect.width / 2) - (panelWidth / 2);
                const minLeft = 8 + scrollX;
                const maxLeft = scrollX + viewportWidth - panelWidth - 8;
                if (left < minLeft) left = minLeft;
                if (left > maxLeft) left = maxLeft;

                panel.style.left = left + 'px';
                panel.style.top = (navRect.bottom + scrollY) + 'px';
                panel.style.transform = 'none';
            } else {
                panel.style.width = '';
                panel.style.left = '';
                panel.style.top = '';
            }
        }

        function show() {
            clearTimeout(hideTimeout);
            position();
            panel.classList.add('visible');
            panel.setAttribute('aria-hidden','false');
        }
        function hide() {
            hideTimeout = setTimeout(()=>{
                panel.classList.remove('visible');
                panel.setAttribute('aria-hidden','true');
            }, 140);
        }

        link.addEventListener('mouseenter', show);
        link.addEventListener('focus', show);
        link.addEventListener('mouseleave', hide);
        link.addEventListener('blur', hide);

        panel.addEventListener('mouseenter', show);
        panel.addEventListener('mouseleave', hide);
        panel.addEventListener('focusin', show);
        panel.addEventListener('focusout', hide);

        window.addEventListener('resize', function(){ if (panel.classList.contains('visible')) position(); });
        window.addEventListener('scroll', function(){ if (panel.classList.contains('visible')) position(); }, { passive: true });
    }

    attachHoverPanel('link-neden', 'hover-neden');
})();
</script>

<!-- Original '#neden' section moved into hover panel above; removed from page flow -->

<!-- 'turler' content moved into hover panel; removed from page flow -->

<div class="container" id="renkler">
    <h2 data-i18n="bin-colors">Geri Dönüşüm Kutularının Renkleri</h2>
    <div class="kutular">
        <div class="kutu kagit" data-i18n-html="blue-box">MAVİ<br>Kağıt / Karton</div>
        <div class="kutu plastik" data-i18n-html="yellow-box">SARI<br>Plastik</div>
        <div class="kutu cam" data-i18n-html="green-box">YEŞİL<br>Cam</div>
        <div class="kutu metal" data-i18n-html="grey-box">GRİ<br>Metal</div>
        <div class="kutu organik" data-i18n-html="brown-box">KAHVERENGİ<br>Organik</div>
        <div class="kutu siyah" data-i18n-html="black-box">SİYAH<br>Geri Dönüşemeyen</div>
        <div class="kutu tibbi" data-i18n-html="red-box">KIRMIZI<br>Tibbi</div>
        <div class="kutu seffaf" data-i18n-html="clear-box">SEFFAF<br>Tehlikeli / Elektronik</div>
    </div>
    <!-- Detay panelleri: kutulara tıklayınca açılacak bilgiler -->
    <div id="kagitDetails" class="kutu-details kagit" aria-hidden="true">
        <h3 data-i18n="blue-heading">Mavi Kutuda Neler Atılır?</h3>
        <ul>
            <li>Gazete ve dergiler</li>
            <li>Karton kutular (temiz ve kuru)</li>
            <li>Defter, ciltli olmayan kitaplar</li>
            <li>Kağıt torbalar ve poşetler</li>
            <li>Ofis kağıtları, fotokopi kağıdı</li>
            <li>Kağıt ambalajlar (içerikleri boşaltılmış ve temizlenmiş)</li>
        </ul>
        <h3 data-i18n="why-should-throw">Neden Bunları Atmalıyız?</h3>
        <p data-i18n="blue-desc">Kağıt materyaller geri dönüştürüldüğünde ağaç ihtiyacı azalır, enerji tasarrufu sağlanır ve atık miktarı küçülür. Kirli veya yağlı kağıtlar (ör. yağlı pizza kutuları) geri dönüşüm sürecini bozabileceği için genellikle ayrılmalıdır.</p>
    </div>

    <div id="plastikDetails" class="kutu-details plastik" aria-hidden="true">
        <h3 data-i18n="yellow-heading">Sarı Kutuda Neler Atılır?</h3>
        <ul>
            <li>Plastik su ve içecek şişeleri (boş ve kapağı çıkarılmış)</li>
            <li>Plastik kaplar ve kutular (içerikler temizlenmiş)</li>
            <li>Plastik torbalar (biriktirilip temizlenmiş)</li>
            <li>Ambalaj plastikleri (etiket ve kir varsa temizlenmiş)</li>
        </ul>
        <h3 data-i18n="why-should-throw">Neden Bunları Atmalıyız?</h3>
        <p data-i18n="yellow-desc">Plastikler uygun şekilde ayrıldığında tekrar işlenebilir; doğada çok uzun süre kalırlar ve doğru geri dönüşüm çevre kirliliğini azaltır. Kirli plastikler geri dönüşüm işlemini zorlaştırır.</p>
    </div>

    <div id="camDetails" class="kutu-details cam" aria-hidden="true">
        <h3 data-i18n="green-heading">Yeşil Kutuda Neler Atılır?</h3>
        <ul>
            <li>Cam şişeler ve kavanozlar</li>
            <li>Cam ambalajlar (cerrahi cam, porselen vb. değil)</li>
        </ul>
        <h3 data-i18n="why-should-throw">Neden Bunları Atmalıyız?</h3>
        <p data-i18n="green-desc">Cam sınırsız sayıda geri dönüştürülebilir; cam atıkların ayrılması enerji tasarrufu sağlar ve ham madde kullanımını azaltır. Cam kırıkları dikkatlice paketlenmelidir.</p>
    </div>

    <div id="metalDetails" class="kutu-details metal" aria-hidden="true">
        <h3 data-i18n="grey-heading">Gri Kutuda Neler Atılır?</h3>
        <ul>
            <li>Konserve kutuları</li>
            <li>İçecek kutuları (alüminyum)</li>
            <li>Metal kapaklar ve küçük metal parçalar</li>
        </ul>
        <h3 data-i18n="why-should-throw">Neden Bunları Atmalıyız?</h3>
        <p data-i18n="grey-desc">Metaller geri dönüştürüldüğünde yeni ürün üretmek için daha az enerji harcanır. Metal atıklar sıkıştırılabilir ve geri dönüşüm verimliliğini artırır.</p>
    </div>
    <div id="organikDetails" class="kutu-details organik" aria-hidden="true">
        <h3 data-i18n="brown-heading">Kahverengi Kutuda Neler Atılır?</h3>
        <p data-i18n="brown-desc">Organik atıklar; yemek artıkları, bahçe atıkları ve kompostlanabilir maddeler buraya atılır. Ayrıştırma toprağa geri dönüşüm sağlar.</p>
    </div>
    <div id="siyahDetails" class="kutu-details siyah" aria-hidden="true">
        <h3 data-i18n="black-heading">Siyah Kutuda Neler Atılır?</h3>
        <p data-i18n="black-desc">Geri dönüşümü mümkün olmayan evsel atıklar (kirli paketlemeler, küçük kırık eşyalar) siyah kutuda toplanır ve bertaraf edilir.</p>
    </div>
    <div id="tibbiDetails" class="kutu-details tibbi" aria-hidden="true">
        <h3 data-i18n="red-heading">Tibbi Atiklar (Kirmizi)</h3>
        <p data-i18n="red-desc">Tibbi atiklar kirmizi kutu veya posetlerde toplanmalidir; sivri nesneler delinmeye dayanikli kutularda ayrica isaretlenmelidir.</p>
    </div>
    <div id="seffafDetails" class="kutu-details seffaf" aria-hidden="true">
        <h3 data-i18n="clear-heading">Şeffaf Kutuda Neler Atılır?</h3>
        <p data-i18n="clear-desc">Tehlikeli atıklar ve elektronik atıklar (piller, küçük elektronik cihazlar) şeffaf ambalaj veya ayrı toplama noktalarında toplanır. Güvenli teslim önemlidir.</p>
    </div>
</div>

<div class="container" id="faaliyetler">
    <h2 data-i18n="activities">Faaliyetler</h2>
    <ul>
        <li><strong data-i18n="activity-1-title">Çevre Temizliği Etkinlikleri:</strong> <span data-i18n="activity-1-desc">Ayda bir kez organize edilen parklar ve plajlar temizlik kampanyaları.</span></li>
        <li><strong data-i18n="activity-2-title">Eğitim Atölyesi:</strong> <span data-i18n="activity-2-desc">Okullara ve kurumlara geri dönüşüm hakkında bilgilendirme ve pratik atölyeler düzenliyoruz.</span></li>
        <li><strong data-i18n="activity-3-title">Geri Dönüşüm Sürüşü:</strong> <span data-i18n="activity-3-desc">İlçelerde geri dönüşüm bilinçlendirme ve toplama noktaları hakkında bilgi veren mobil etkinlikler.</span></li>
        <li><strong data-i18n="activity-4-title">Sosyal Medya Kampanyaları:</strong> <span data-i18n="activity-4-desc">#GeriDönüşBirHayata etiketi ile farkındalık yaratıyoruz.</span></li>
    </ul>
</div>

<div class="container" id="iletisim" style="display: flex; gap: 30px; align-items: flex-start;">
    <div style="flex: 1;">
        <h2 data-i18n="contact">İletişim</h2>
        <p><strong>E-posta:</strong> <a href="mailto:info@geridosumsistemi.org">info@geridosumsistemi.org</a></p>
        <p><strong>Telefon:</strong> <a href="tel:05373148806">0537 314 8806</a></p>
        <p><strong>Adres:</strong> Ankara, Türkiye</p>
        <p><strong>Sosyal Medya:</strong></p>
        <ul>
            <li><a href="#">Facebook</a></li>
            <li><a href="https://www.instagram.com/_enderbartug/" target="_blank">Instagram (_enderbartug)</a></li>
            <li><a href="https://www.instagram.com/nuri_ozcaan/" target="_blank">Instagram (nuri_ozcaan)</a></li>
        </ul>
    </div>
    <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
        <img src="/static/images/image.png" alt="Geri Dönüşüm" style="max-width: 100%; height: auto; max-height: 400px; object-fit: contain;">
    </div>
</div>

<div class="container" id="ekip">
    <h2 data-i18n="team">Proje Ekibi</h2>
    <p data-i18n="team-desc">Bu site, Geri Dönüşüm Bilgilendirme Sistemi grup projesi kapsamında hazırlanmıştır.</p>
    <ul>
        <li>Nuri Özcan – 240307041</li>
        <li>Bartuğ Ender – 240307046</li>
    </ul>
</div>

<footer>
    <p data-i18n="footer-copyright">© 2025 Geri Dönüşüm Bilgilendirme Sistemi – Tüm hakları saklıdır.</p>
    <p data-i18n="footer-message">Doğa için geri dönüştürüyoruz. Çevreyi korumak hepimizin sorumluluğu.</p>
</footer>

<script>
// Parallax on scroll + mouse movement for interactive background effect
(function(){
    const layers = document.querySelectorAll('.parallax-hero .layer');
    if(!layers.length) return;
    
    let latestKnownScrollY = 0;
    let latestMouseX = 0;
    let latestMouseY = 0;
    let ticking = false;

    function onScroll(){
        latestKnownScrollY = window.scrollY;
        requestTick();
    }

    function onMouseMove(e){
        latestMouseX = e.clientX;
        latestMouseY = e.clientY;
        requestTick();
    }

    function requestTick(){
        if(!ticking){
            requestAnimationFrame(update);
            ticking = true;
        }
    }

    function update(){
        const scrolled = latestKnownScrollY;
        // normalize mouse position (-1 to 1)
        const mouseXPercent = (latestMouseX / window.innerWidth) * 2 - 1;
        const mouseYPercent = (latestMouseY / window.innerHeight) * 2 - 1;
        
        // depths for each layer (back, mid, front)
        const depths = [0.18, 0.35, 0.6];
        const mouseDepths = [15, 25, 35]; // pixel offset per mouse movement
        
        layers.forEach((layer, i) => {
            const depth = depths[i] || 0.3;
            const mouseDepth = mouseDepths[i] || 20;
            
            const translateY = scrolled * depth + (mouseYPercent * mouseDepth);
            const translateX = mouseXPercent * mouseDepth * 0.5;
            
            layer.style.transform = `translate(${translateX}px, ${translateY}px)`;
        });
        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('mousemove', onMouseMove, {passive:true});
    
    // initial position
    update();
})();
</script>

<script>
// Kutu detaylarını toggle eden genel JS (tüm kutular için)
document.addEventListener('DOMContentLoaded', function() {
    const mappings = [
        { type: 'kagit', detailId: 'kagitDetails' },
        { type: 'plastik', detailId: 'plastikDetails' },
        { type: 'cam', detailId: 'camDetails' },
        { type: 'metal', detailId: 'metalDetails' },
        { type: 'organik', detailId: 'organikDetails' },
        { type: 'siyah', detailId: 'siyahDetails' },
        { type: 'tibbi', detailId: 'tibbiDetails' },
        { type: 'seffaf', detailId: 'seffafDetails' }
    ];

    function closeAllExcept(openId) {
        mappings.forEach(m => {
            const d = document.getElementById(m.detailId);
            const box = document.querySelector('.kutu.' + m.type);
            if (!d) return;
            if (m.detailId !== openId) {
                d.classList.remove('open');
                d.setAttribute('aria-hidden', 'true');
                if (box) box.setAttribute('aria-expanded', 'false');
            }
        });
    }

    mappings.forEach(m => {
        const box = document.querySelector('.kutu.' + m.type);
        const detail = document.getElementById(m.detailId);
        if (!box || !detail) return;

        box.style.cursor = 'pointer';
        box.setAttribute('role', 'button');
        box.setAttribute('aria-expanded', 'false');

        box.addEventListener('click', function(e) {
            e.stopPropagation();
            const isOpen = detail.classList.toggle('open');
            detail.setAttribute('aria-hidden', isOpen ? 'false' : 'true');
            box.setAttribute('aria-expanded', isOpen ? 'true' : 'false');

            if (isOpen) {
                closeAllExcept(m.detailId);
                // Otomatik kaydırma yok: panel açıldığında sayfa kaydırılmayacak.
            }
        });
    });

    // Dışarı tıklanırsa açık olanları kapat
    document.addEventListener('click', function(e) {
        mappings.forEach(m => {
            const box = document.querySelector('.kutu.' + m.type);
            const detail = document.getElementById(m.detailId);
            if (!detail || !detail.classList.contains('open')) return;
            if (box.contains(e.target) || detail.contains(e.target)) return;
            detail.classList.remove('open');
            detail.setAttribute('aria-hidden', 'true');
            if (box) box.setAttribute('aria-expanded', 'false');
        });
    });

    // Tema toggle: localStorage ile sakla
    const themeToggle = document.getElementById('themeToggle');
    if (themeToggle) {
        function setThemeDark(isDark) {
            if (isDark) {
                document.documentElement.classList.add('dark');
                themeToggle.checked = true;
            } else {
                document.documentElement.classList.remove('dark');
                themeToggle.checked = false;
            }
        }

        const saved = localStorage.getItem('theme');
        if (saved === 'dark') {
            setThemeDark(true);
        } else if (saved === 'light') {
            setThemeDark(false);
        } else {
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            setThemeDark(prefersDark);
        }

        themeToggle.addEventListener('change', function() {
            const isDark = themeToggle.checked;
            setThemeDark(isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });
    }
});
</script>

<script>
// Reveal-on-scroll using IntersectionObserver
document.addEventListener('DOMContentLoaded', function() {
    // Mark main .container elements as reveal targets
    document.querySelectorAll('.container').forEach(el => el.classList.add('reveal'));

    const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReduced) {
        // make everything visible immediately
        document.querySelectorAll('.reveal').forEach(r => r.classList.add('in-view'));
        return;
    }

    const obs = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('in-view');
                // optionally unobserve to avoid re-running
                obs.unobserve(entry.target);
            }
        });
    }, { threshold: 0.12 });

    document.querySelectorAll('.reveal').forEach(r => obs.observe(r));
});
</script>

<script>
// Language Switching (Turkish / English)
const translations = {
    tr: {
        "site-title": "Geri Dönüşüm Bilgilendirme Sistemi",
        "site-subtitle": "Çevreyi korumak için küçük adımlar, büyük etkiler.",
        "nav-why": "Neden Geri Dönüşüm?",
        "nav-contact": "İletişim",
        "nav-team": "Proje Ekibi",
        "why-heading": "Neden Geri Dönüşüm Önemlidir?",
        "why-item1": "Doğal kaynakların daha verimli kullanılmasını sağlar.",
        "why-item2": "Enerji tasarrufu sağlar.",
        "why-item3": "Çöp miktarını ve çevre kirliliğini azaltır.",
        "why-item4": "Gelecek nesiller için daha temiz bir dünya bırakmamıza yardım eder.",
        "hero-title": "Geri Dönüşümle Geleceğe Adım At",
        "hero-subtitle": "Doğa için küçük bir adım atın — bugün geri dönüştürmeye başlayın.",
        "detailed-info": "Detaylı Bilgi",
        "bin-colors": "Geri Dönüşüm Kutularının Renkleri",
        "activities": "Faaliyetler",
        "team-desc": "Bu site, Geri Dönüşüm Bilgilendirme Sistemi grup projesi kapsamında hazırlanmıştır.",
        "footer-copyright": "© 2025 Geri Dönüşüm Bilgilendirme Sistemi – Tüm hakları saklıdır.",
        "footer-message": "Doğa için geri dönüştürüyoruz. Çevreyi korumak hepimizin sorumluluğu.",
        "contact": "İletişim",
        "team": "Proje Ekibi",
        "login": "Giriş Yap",
        "signup": "Kayıt Ol",
        "logout": "Çıkış",
        "login-heading": "Giriş Yap",
        "signup-heading": "Kayıt Ol",
        "email": "E-posta Adresi",
        "password": "Şifre",
        "password-repeat": "Şifre Tekrar",
        "full-name": "Ad Soyad",
        "nickname": "Kullanıcı Adı",
        "no-account": "Hesabınız yok mu?",
        "have-account": "Zaten hesabınız var mı?",
        "blue-box": "MAVİ<br>Kağıt / Karton",
        "yellow-box": "SARI<br>Plastik",
        "green-box": "YEŞİL<br>Cam",
        "grey-box": "GRİ<br>Metal",
        "brown-box": "KAHVERENGİ<br>Organik",
        "black-box": "SİYAH<br>Geri Dönüşemeyen",
        "red-box": "KIRMIZI<br>Tibbi",
        "clear-box": "SEFFAF<br>Tehlikeli / Elektronik",
        "blue-heading": "Mavi Kutuda Neler Atılır?",
        "blue-desc": "Kağıt materyaller geri dönüştürüldüğünde ağaç ihtiyacı azalır, enerji tasarrufu sağlanır ve atık miktarı küçülür. Kirli veya yağlı kağıtlar (ör. yağlı pizza kutuları) geri dönüşüm sürecini bozabileceği için genellikle ayrılmalıdır.",
        "yellow-heading": "Sarı Kutuda Neler Atılır?",
        "yellow-desc": "Plastikler uygun şekilde ayrıldığında tekrar işlenebilir; doğada çok uzun süre kalırlar ve doğru geri dönüşüm çevre kirliliğini azaltır. Kirli plastikler geri dönüşüm işlemini zorlaştırır.",
        "green-heading": "Yeşil Kutuda Neler Atılır?",
        "green-desc": "Cam sınırsız sayıda geri dönüştürülebilir; cam atıkların ayrılması enerji tasarrufu sağlar ve ham madde kullanımını azaltır. Cam kırıkları dikkatlice paketlenmelidir.",
        "grey-heading": "Gri Kutuda Neler Atılır?",
        "grey-desc": "Metaller geri dönüştürüldüğünde yeni ürün üretmek için daha az enerji harcanır. Metal atıklar sıkıştırılabilir ve geri dönüşüm verimliliğini artırır.",
        "brown-heading": "Kahverengi Kutuda Neler Atılır?",
        "brown-desc": "Organik atıklar; yemek artıkları, bahçe atıkları ve kompostlanabilir maddeler buraya atılır. Ayrıştırma toprağa geri dönüşüm sağlar.",
        "black-heading": "Siyah Kutuda Neler Atılır?",
        "black-desc": "Geri dönüşümü mümkün olmayan evsel atıklar (kirli paketlemeler, küçük kırık eşyalar) siyah kutuda toplanır ve bertaraf edilir.",
        "red-heading": "Tibbi Atiklar (Kirmizi)",
        "red-desc": "Tibbi atiklar kirmizi kutu veya posetlerde toplanmalidir; sivri nesneler delinmeye dayanikli kutularda ayrica isaretlenmelidir.",
        "clear-heading": "Şeffaf Kutuda Neler Atılır?",
        "clear-desc": "Tehlikeli atıklar ve elektronik atıklar (piller, küçük elektronik cihazlar) şeffaf ambalaj veya ayrı toplama noktalarında toplanır. Güvenli teslim önemlidir.",
        "why-should-throw": "Neden Bunları Atmalıyız?",
        "activity-1-title": "Çevre Temizliği Etkinlikleri:",
        "activity-1-desc": "Ayda bir kez organize edilen parklar ve plajlar temizlik kampanyaları.",
        "activity-2-title": "Eğitim Atölyesi:",
        "activity-2-desc": "Okullara ve kurumlara geri dönüşüm hakkında bilgilendirme ve pratik atölyeler düzenliyoruz.",
        "activity-3-title": "Geri Dönüşüm Sürüşü:",
        "activity-3-desc": "İlçelerde geri dönüşüm bilinçlendirme ve toplama noktaları hakkında bilgi veren mobil etkinlikler.",
        "activity-4-title": "Sosyal Medya Kampanyaları:",
        "activity-4-desc": "#GeriDönüşBirHayata etiketi ile farkındalık yaratıyoruz."
    },
    en: {
        "site-title": "Recycling Information System",
        "site-subtitle": "Small steps to protect the environment, big impacts.",
        "nav-why": "Why Recycling?",
        "nav-contact": "Contact",
        "nav-team": "Project Team",
        "why-heading": "Why is Recycling Important?",
        "why-item1": "Enables more efficient use of natural resources.",
        "why-item2": "Provides energy savings.",
        "why-item3": "Reduces waste amount and environmental pollution.",
        "why-item4": "Helps us leave a cleaner world for future generations.",
        "hero-title": "Step into the Future with Recycling",
        "hero-subtitle": "Take a small step for nature — start recycling today.",
        "detailed-info": "Detailed Information",
        "bin-colors": "Colors of Recycling Bins",
        "activities": "Activities",
        "team-desc": "This site was prepared as part of the Recycling Information System group project.",
        "footer-copyright": "© 2025 Recycling Information System – All rights reserved.",
        "footer-message": "We recycle for nature. Protecting the environment is everyone's responsibility.",
        "contact": "Contact",
        "team": "Project Team",
        "login": "Login",
        "signup": "Sign Up",
        "logout": "Logout",
        "login-heading": "Login",
        "signup-heading": "Sign Up",
        "email": "Email Address",
        "password": "Password",
        "password-repeat": "Confirm Password",
        "full-name": "Full Name",
        "nickname": "Nickname",
        "no-account": "Don't have an account?",
        "have-account": "Already have an account?",
        "blue-box": "BLUE<br>Paper / Cardboard",
        "yellow-box": "YELLOW<br>Plastic",
        "green-box": "GREEN<br>Glass",
        "grey-box": "GREY<br>Metal",
        "brown-box": "BROWN<br>Organic",
        "black-box": "BLACK<br>Non-Recyclable",
        "red-box": "RED<br>Medical",
        "clear-box": "CLEAR<br>Hazardous / Electronic",
        "blue-heading": "What Goes in the Blue Bin?",
        "blue-desc": "When paper materials are recycled, the need for trees decreases, energy is saved, and waste is reduced. Dirty or greasy papers (e.g., greasy pizza boxes) should generally be separated as they can disrupt the recycling process.",
        "yellow-heading": "What Goes in the Yellow Bin?",
        "yellow-desc": "When properly separated, plastics can be reprocessed; they remain in nature for a very long time, and proper recycling reduces environmental pollution. Dirty plastics make the recycling process difficult.",
        "green-heading": "What Goes in the Green Bin?",
        "green-desc": "Glass can be recycled indefinitely; separating glass waste saves energy and reduces raw material usage. Glass fragments should be carefully packaged.",
        "grey-heading": "What Goes in the Grey Bin?",
        "grey-desc": "When metals are recycled, less energy is spent to produce new products. Metal waste can be compressed and increases recycling efficiency.",
        "brown-heading": "What Goes in the Brown Bin?",
        "brown-desc": "Organic waste; food scraps, garden waste, and compostable materials are disposed of here. Decomposition provides recycling back to the soil.",
        "black-heading": "What Goes in the Black Bin?",
        "black-desc": "Non-recyclable household waste (dirty packaging, small broken items) is collected in the black bin and disposed of.",
        "red-heading": "Medical Waste (Red)",
        "red-desc": "Medical waste should be collected in red bins or bags; sharp objects should be additionally marked in puncture-resistant containers.",
        "clear-heading": "What Goes in the Clear Bin?",
        "clear-desc": "Hazardous waste and electronic waste (batteries, small electronic devices) are collected in clear packaging or at separate collection points. Safe delivery is important.",
        "why-should-throw": "Why Should We Dispose of These?",
        "activity-1-title": "Environmental Cleaning Events:",
        "activity-1-desc": "Parks and beaches cleanup campaigns organized once a month.",
        "activity-2-title": "Educational Workshop:",
        "activity-2-desc": "We organize informational and practical workshops about recycling for schools and institutions.",
        "activity-3-title": "Recycling Drive:",
        "activity-3-desc": "Mobile events providing information about recycling awareness and collection points in districts.",
        "activity-4-title": "Social Media Campaigns:",
        "activity-4-desc": "We create awareness with the hashtag #RecycleForLife."
    }
};

function switchLanguage(lang) {
    localStorage.setItem('currentLanguage', lang);

    document.querySelectorAll('.lang-flag').forEach(flag => {
        flag.classList.toggle('active', flag.getAttribute('data-lang') === lang);
    });

    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = translations[lang] && translations[lang][key];
        if (!translation) return;

        if (element.tagName === 'INPUT') {
            element.placeholder = translation;
        } else {
            element.textContent = translation;
        }
    });

    document.querySelectorAll('[data-i18n-html]').forEach(element => {
        const key = element.getAttribute('data-i18n-html');
        const translation = translations[lang] && translations[lang][key];
        if (!translation) return;
        element.innerHTML = translation;
    });

    document.documentElement.lang = lang;
}

document.addEventListener('DOMContentLoaded', function() {
    const savedLang = localStorage.getItem('currentLanguage') || 'tr';
    switchLanguage(savedLang);
});
</script>







